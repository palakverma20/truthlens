<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TruthLens - Message Analysis Tool</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

      // Firebase config (same as signup.html)
      const firebaseConfig = {
        apiKey: "AIzaSyBuNFD8eoqt5acIgcSMN7SxbWeHeCjaJgo",
        authDomain: "truthlens-2.firebaseapp.com",
        projectId: "truthlens-2",
        appId: "1:973455378592:web:bc034830dccbc849fd61c5",
      };

      // 1Ô∏è‚É£ Create Firebase app
      const app = initializeApp(firebaseConfig);

      // 2Ô∏è‚É£ Get auth AFTER app exists
      const auth = getAuth(app);

      // 3Ô∏è‚É£ Check login status
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          // üë∂ If not logged in ‚Üí go to signup
          window.location.href = "signup.html";
        }
      });
    </script>

    <button
      id="themeToggle"
      class="theme-toggle"
      aria-label="Switch theme"
      title="Switch theme"
    >
      <svg
        class="sun-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
      </svg>
      <svg
        class="moon-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
      </svg>
    </button>

    <div class="container">
      <header class="header">
        <div class="header-content">
          <div class="title-wrapper">
            <svg
              class="lens-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <h1 class="title">TruthLens</h1>
          </div>
          <div class="title-underline"></div>
          <p class="subtitle">See how messages try to influence you</p>
        </div>
      </header>

      <main class="main-content">
        <div class="input-card">
          <label for="messageInput" class="input-label"
            >Paste your message</label
          >
          <textarea
            id="messageInput"
            class="textarea"
            placeholder="Enter text to analyze..."
            maxlength="5000"
          ></textarea>
          <div class="file-upload-wrapper">
            <label for="fileInput" class="file-label">
              Or upload a file (PDF / TXT / Image)
            </label>

            <input
              type="file"
              id="fileInput"
              class="file-input"
              accept=".pdf,.txt,.png,.jpg,.jpeg"/>
          </div>

          <div class="char-counter"><span id="charCount">0</span>/5000</div>
          <button id="analyzeBtn" class="analyze-btn">
            <svg
              class="btn-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            Analyze Message
          </button>
          <p class="input-hint">
            You can either paste text or upload a file
          </p>
        </div>

        <div id="loadingState" class="loading-state hidden">
          <div class="spinner"></div>
          <p class="scanning-text">Scanning intent...</p>
          <div class="scanning-line"></div>
        </div>

        <div id="resultsSection" class="results-section hidden">
          <div class="explanation-card fade-in">
            <div class="card-header">
              <svg
                class="card-icon brain-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M9.59 9a6 6 0 1 0 12 0A6 6 0 0 0 9.59 9Z"></path>
                <path d="M9.05 9.54c-3.6-.7-6.05 2.35-6.05 5.46"></path>
                <path
                  d="M9.59 19v-2m3.41-2v2m-3.41-4v2m3.41-2v2m-3.41-4v2m3.41-2v2"
                ></path>
              </svg>
              <h2>Analysis</h2>
            </div>
            <p id="explanationText" class="explanation-text"></p>
          </div>

          <div class="risk-meter-card fade-in">
            <div class="card-header">
              <svg
                class="card-icon warning-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3.05h16.94a2 2 0 0 0 1.71-3.05L13.71 3.86a2 2 0 0 0-3.42 0z"
                ></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
              <h3>Manipulation Risk</h3>
            </div>
            <div class="meter-container">
              <div class="meter-bar">
                <div id="riskFill" class="meter-fill"></div>
              </div>
              <div class="risk-label-wrapper">
                <div class="risk-label">
                  <span id="riskScore" class="risk-number">0</span
                  ><span class="risk-max">/100</span>
                </div>
                <div id="moodBadge" class="mood-badge hidden">
                  <span id="moodEmoji" class="mood-emoji">üòê</span>
                  <span id="moodLabel" class="mood-label">Calm Analysis</span>
                </div>
              </div>
            </div>
            <div class="risk-controls">
              <p id="riskDescription" class="risk-description"></p>
              <button id="whyScoreBtn" class="why-score-btn">
                Why this score?
              </button>
            </div>
            <div id="reasonsPanel" class="reasons-panel hidden">
              <h4>Why this score?</h4>
              <ul id="reasonsList" class="reasons-list"></ul>
            </div>
          </div>

          <div class="agent-timeline-card fade-in">
            <div class="card-header">
              <svg
                class="card-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="color: var(--accent-cyan)"
              >
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
              </svg>
              <h3>Analysis Timeline</h3>
            </div>
            <div class="timeline">
              <div class="timeline-step">
                <div class="timeline-marker complete">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </div>
                <div class="timeline-content">
                  <h5>Emotion Agent</h5>
                  <p>Analyzes emotional tone</p>
                </div>
              </div>
              <div class="timeline-step">
                <div class="timeline-marker complete">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </div>
                <div class="timeline-content">
                  <h5>Logic Agent</h5>
                  <p>Evaluates reasoning patterns</p>
                </div>
              </div>
              <div class="timeline-step">
                <div class="timeline-marker complete">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </div>
                <div class="timeline-content">
                  <h5>Pattern Agent</h5>
                  <p>Matches known manipulation patterns</p>
                </div>
              </div>
            </div>
          </div>

          <div class="confidence-badge-card fade-in">
            <div class="confidence-badge" id="confidenceBadge">
              <span class="confidence-label">Analysis Confidence</span>
              <span id="confidenceValue" class="confidence-value">‚Äî</span>
            </div>
          </div>

          <div class="insights-grid">
            <div class="insight-card fade-in">
              <svg
                class="insight-icon emotion-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                ></path>
              </svg>
              <h4>Emotion</h4>
              <p id="emotionText"></p>
            </div>

            <div class="insight-card fade-in">
              <svg
                class="insight-icon logic-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"
                ></path>
              </svg>
              <h4>Logic</h4>
              <p id="logicText"></p>
            </div>

            <div class="insight-card fade-in">
              <svg
                class="insight-icon pattern-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M4 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4z"
                ></path>
                <path d="M8 9h8M8 13h8M8 17h4"></path>
              </svg>
              <h4>Pattern</h4>
              <p id="patternText"></p>
            </div>
          </div>
        </div>

        <div id="errorState" class="error-state hidden">
          <p id="errorMessage"></p>
        </div>
      </main>

      <footer class="disclaimer-section">
        <div class="disclaimer-divider"></div>
        <div class="disclaimer-content">
          <div class="disclaimer-header">
            <svg
              class="disclaimer-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <h3 class="disclaimer-title">Disclaimer</h3>
          </div>
          <p class="disclaimer-text">
            TruthLens analyzes language patterns and communication styles to
            highlight possible emotional or logical manipulation. It does not
            verify real accounts, transactions, or official notices. Results are
            provided for educational and awareness purposes only.
          </p>
        </div>
      </footer>
    </div>

    

    <script src="script.js"></script>

    <script src="features.js"></script>
  </body>
</html>

